<style>
  .breadcrumb-item + .breadcrumb-item::before {
    content: ">";
  }
  li:last-child {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
  }
</style>

<ul class="breadcrumb bg-white">
  {{- $tempScratch := newScratch -}}
  {{- template "breadcrumbnav" (dict "tempScratch" $tempScratch "p1" . "p2" .) -}}
</ul>

{{ define "breadcrumbnav" }}
  {{- .tempScratch.Set "classes" (slice "breadcrumb-item") -}}
  {{- if .p1.Parent -}}
    {{- template "breadcrumbnav" (dict "tempScratch" .tempScratch "p1" .p1.Parent "p2" .p2 ) -}}
  {{- else if not .p1.IsHome -}}
    {{- template "breadcrumbnav" (dict "tempScratch" .tempScratch "p1" .p1.Site.Home "p2" .p2 ) -}}
  {{- end -}}

  {{- if eq .p1 .p2 -}}
    {{- .tempScratch.Set "last" true -}}
    {{- .tempScratch.Add "classes" "active" -}}
  {{- end -}}

  {{ .tempScratch.Set "title" (cond (.p1.IsHome) "Home" (title .p1.Title)) }}
  <li class="{{ delimit (.tempScratch.Get "classes") " " }}">
    {{- if ne (.tempScratch.Get "last") true -}}
      <span><a href="{{ .p1.RelPermalink }}">{{ .tempScratch.Get "title" }}</a></span>
    {{- else -}}
      <!-- will always be last: -->
      <span>{{- .tempScratch.Get "title" -}}</span>
    {{- end -}}
  </li>
{{ end }}
