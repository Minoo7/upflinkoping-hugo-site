{{ define "main" }}
  <section class="site-blog">
    <div class="container">
      {{/* RUBRIC */}}
      <div class="row site-blog-header justify-content-center text-bg-white">
        <div class="col-lg-8 text-center">
          <h1>{{ .Title }}</h1>
          {{ .Content }}
        </div>
      </div>

      <div class="row">
        {{- $currentPage := . -}}
        {{ $paginator := (.Paginator 4) }}
        {{- range $paginator.Pages -}}
          <article class="col-lg-6 col-md-10 mx-auto">
            <div class="card-container details {{ if eq .Params.multi true }}multi{{ end }}">
              <div class="card">
                <div class="card-img-top">
                  <a href="{{ .Permalink }}">
                    {{- $image := (.Resources.GetMatch "images/cover.*") -}}
                    {{/* {{ $cover_dimens := $currentPage.Site.Params.cover_dimens }} */}}
                    {{- $dimens := (cond (isset $currentPage.Params "dimensions") $currentPage.Params.dimensions
                      (cond (eq .Params.own_size true) (partial "methods/get-dimens" (dict "width" $image.Width "height" $image.Height)) "960x960"))
                    -}}
                    {{- $command := (cond (isset .Params "fit") "Fit" "Fill") -}}
                    {{- $image = (partial "methods/hugo-imgproc.html" (dict "img" $image "command" $command "options" $dimens)) -}}
                    <img src="{{ $image.Permalink }}" width="100%" alt="" />
                  </a>
                </div>
                <div class="card-body">
                  <span class="card-text">{{ .PublishDate.Format "January 2, 2006" }}</span>
                  <h3 class="card-title"><a href="{{ .Permalink }}" class="card-link">{{ upper .Title | safeHTML }}</a></h3>
                  <small class="card-text">{{ .Summary | truncate 120 }}</small>
                  <a href="{{ .Permalink }}" class="card-link read-more text-primary">read more</a>
                </div>
              </div>
            </div>
          </article>
        {{- end -}}

        {{/* Last page: */}}
        {{ if eq $paginator.PageNumber  $paginator.TotalPages }}
          <article class="col-lg-6 col-md-10 mx-auto">
            <div class="card-container insta-placeholder">
              <div class="card">
                <div class="card-img-top">
                  <!-- LightWidget WIDGET -->
                  {{- partial "widgets/lightwidget" .Site.Data.instagram.single_lightwidget_id -}}
                </div>
                <div class="insta-placeholder-text card-img-overlay center-btn justify-content-center pe-none">
                  <h1 class="plus">+</h1>
                  <h2 class="text-white insta-placeholder text-center">{{ .Site.Params.insta_placeholder | safeHTML }}</h2>
                </div>
              </div>
            </div>
          </article>
        {{ end }}


        <div class="col-12">
          <div class="site-blog-pagination">
            {{ template "_internal/pagination.html" . }}
          </div>
        </div>
      </div>
    </div>
  </section>
{{ end }}
